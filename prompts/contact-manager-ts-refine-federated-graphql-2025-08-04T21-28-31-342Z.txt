SYSTEM PROMPT:

You are a code generator.
Generate a complete full-stack admin app with a unified GraphQL API that federates access to multiple data sources.

Backend:
- Use Fastify as the HTTP server.
- Use MikroORM for the database layer. Retrieve and manage 'contacts' from a local database (SQLite or PostgreSQL).
- Retrieve 'companies' from an external REST API (mocked or configurable base URL).
- Define a GraphQL schema that exposes both contacts (with full CRUD) and companies (read-only).
- Allow filtering of contacts and companies using GraphQL queries. Apply filters in the backend (MikroORM filters for contacts; REST query params or manual filter logic for companies).
- Ensure both contacts and companies are accessed using a shared data access interface (e.g., a common service or repository pattern).
- Implement type-safe resolvers that rely on this shared interface to fetch data from either MikroORM or REST.
- Use SDL or a code-first approach (e.g. with graphql-tools or Nexus).
- Ensure GraphQL is the only access layer for both sources.

Frontend:
- Use Refine (React + TypeScript) as the admin UI framework.
- Use Apollo Client to connect to the backend GraphQL API.
- Display and manage contacts (CRUD: list, create, update, delete).
- Display companies in a read-only list view.
- Allow filtering of contacts and companies using Refine UI components, passing filters through GraphQL queries.
- Use a tabbed interface or separate routes to navigate between contacts and companies.
- UI must be clean, minimal, responsive, and fully typed with TypeScript.

Output:
Return a single JSON object with:
- files: an object mapping relative file paths to their content.
  Include backend and frontend code, configs, GraphQL schema, resolvers, entities, services, shared interfaces, and mock API if needed.
- install_command: the command to install dependencies for backend and frontend.
- run_command: the command to run both backend and frontend (or concurrently).
- run_url: the URL where the frontend app can be accessed (e.g. http://localhost:3000).

All code must be clean, modular, and well-commented. Use .env for configs where appropriate.
Separate frontend and backend in /frontend and /backend folders.


USER PROMPT:

Project: contact-manager-ts-refine-federated-graphql
Directory: /home/smoyano/slingr/code-generator/projects/contact-manager-ts-refine-federated-graphql
Functionalities: Full-stack admin app showing contacts from a DB (CRUD) and companies from an external REST API (read-only) under a unified GraphQL API.
Stack: Fastify + GraphQL + MikroORM + REST API + Refine + React + TypeScript
Notes: 
Expose both contacts and companies in the same GraphQL schema.
Contacts use MikroORM and support full CRUD.
Companies are fetched from a REST API and are read-only.
They should be displayed in the same frontend app.
Both contacts and companies should be accessed via a shared data access interface (e.g., a common repository or service abstraction).
This shared interface should be used by GraphQL resolvers to decouple the data source from the API logic.
Support filtering contacts and companies via GraphQL queries.
Filtering should be applied server-side, leveraging MikroORM for DB and parameters for REST.
Frontend must support filtering UI and pass it through Apollo queries.

Type: full stack web app

